<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>Tables</title>
    
	<meta name="generator" content="Zim 0.62 & the Ecodiv-responsive template">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:300&subset=latin,greek,latin-ext' rel='stylesheet' type='text/css'>
    <script type='text/javascript' src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.1.1.min.js"></script>
    <script type='text/javascript' src="../_resources/script.js" type="text/javascript"></script>
    <link rel="stylesheet" href="../_resources/style.css" type="text/css">
    <link rel="stylesheet" media="screen and (min-width: 1600px)" href="../_resources/style1.css" type="text/css">
    <link rel="stylesheet" media="screen and (max-width: 1600px) and (min-width:1000px)" href="../_resources/style2.css" type="text/css">
    <link rel="stylesheet" media="screen and (max-width: 999px) and (min-width:750px)" href="../_resources/style3.css" type="text/css">
    <link rel="stylesheet" media="screen and (max-width: 750px)" href="../_resources/style4.css" type="text/css">      
</head>
<body>    
	<div class="wrapper">
 
    <!--Collapsable menu-->    
        <div id="taskbar" style="color:#3D6E0F; font-weight:500;">
            <div id="menuicon">
                <a href="#" class="toggler" style="color:#CE5C00; text-decoration:none; line-height: 2em;"><img src="../_resources/menu.png" height="19" alt="Menu"></a> 
            </div>
            <div id="list">
                <div id="navigation">
                    <!-- To add additional links above the navigation menu, replace the link below with your link and remove comment tags
                    If you do, you may want to remove the extra line above the index -->
                    <!-- <p style="padding-left:20px; margin-bottom:0px"><a href="http://yourURL.html">Home</a></p> -->
                    <p></p>
                    <ul>
<li><a href="../Customize.html" title="Customize" class="page">Customize</a>
<ul>
<li><a href="./Code.html" title="Code" class="page">Code</a></li>
<li><a href="./Form.html" title="Form" class="page">Form</a></li>
<li><a href="./Guide.html" title="Guide" class="page">Guide</a></li>
<li><a href="./Query.html" title="Query" class="page">Query</a></li>
<li><a href="./Requirements.html" title="Requirements" class="page">Requirements</a></li>
<li><b>Tables</b></li>
</ul>
</li>
<li><a href="../Introduction.html" title="Introduction" class="page">Introduction</a></li>
<li><a href="../Set-up.html" title="Set-up" class="page">Set-up</a></li>
<li><a href="../Usage.html" title="Usage" class="page">Usage</a></li>
</ul>

                    <p></p>
                    <!-- Warning message if java script is disabled -->
                    <noscript>
                        <div style="padding: 10px">
                            <span style="color:#D48D8D"><p>Please note</p>
                            <p>To hide the menu</p>
                            <p>you need to enable</p>
                            <p>Java script</p></span>
                        </div>
                    </noscript>
                </div>
            </div>
        </div>
        <div id="block">
            <div id="content">
            
                <!-- You may want to replace the image below (but you are welcome to use it if you like) -->
                <img src="../_resources/header_1.png" width=100% alt="Header">
                <br>
                <h1>Tables <a name='Home:Software:xTimeCard:Customize:Tables'></a></h1>
                
                <p>
Created sabato 21 febbraio 2015
</p>

<h2>Tables</h2>

<p>
As a sandbox create a testing table, once you are done give a look to other tables of xTimeCard. <br>
<img src="./Tables/pasted_image.png">
</p>

<h3>_test</h3>

<p>
We work on the set of tables called _<u>test</u> containing sample data from Ziff Corp. First of all create a table called “_test”, add an auto-value primary key of length 10, two text fields of length 50 and two more numeric fields as integer of length 10. <br>
<img src="./Tables/pasted_image001.png">
</p>

<h4>SQL script</h4>

<p>
As you probably know this table may be created also with this SQL script:
</p>
<pre>
CREATE CACHED TABLE "_test"("ID" INTEGER NOT NULL PRIMARY KEY,"Text1" VARCHAR(50),"Text2" VARCHAR(50),"Key1ID" INTEGER,"Key2ID" INTEGER)
INSERT INTO "_test" VALUES(0,'One','Description for one',0,0) 
INSERT INTO "_test" VALUES(1,'Two','Description for two',1,1) 
INSERT INTO "_test" VALUES(2,'Three','Description for three',2,2) 
INSERT INTO "_test" VALUES(3,'Four','Description for four',3,3) 
INSERT INTO "_test" VALUES(4,'Five','Description for five',4,4)
</pre>

<h3>All tables</h3>

<p>
Here are listed all tables with a short description to better understand the skeleton of xTimeCard. We work on the set of tables called _<u>test</u> containing sample data from Ziff Corp. 
</p>

<h4>Activities</h4>

<p>
This table is a master data, has the purpose to keep information about the work activity performed, has a key, a description and a billing rate. It is connected to master data of tasks and transactions of worked time. It may be created also with this SQL script:
</p>

<h4>Status</h4>

<p>
This table is a master data, has the purpose to describe the roadmap of projects, which is meant to be standard. It is also used by tasks to identify the belonging to project's phase. It is obviously connected to master data of projects and tasks.
</p>

<h4>Invoices</h4>

<p>
This table is a transaction data, has the purpose to bill weekly our customers by using a form that allow to select worked hours by week and sign as billed. It contains information of the company (= first record of Employee table), invoice date, payment date, invoice number, and invoice values.
</p>

<h4>Projects</h4>

<p>
This table is a master data, has the purpose to keep information about projects and is directly connected to master data of Customers. It contains information of the motivation, begin and end dates, customer's order and actual state. It connects with transaction data of worked hours.
</p>

<h4>Tasks</h4>

<p>
This table is a master data, has the purpose to keep information about tasks within a project, therefore directly connected to master data of Projects. It contains information of the motivation, begin and end dates, customer's order and actual state.
</p>

<h4>WorkedHrs</h4>

<p>
This table is a transaction data, has the purpose to record daily work. It contains information of the employee, the activity performed and the matrix the project/task/wbs. Once an invoice is created, the single worked hour will be connected the the invoice id.
</p>

<h4>Customers</h4>

<p>
This table is a master data, has the purpose to keep information of our customers.
</p>

<h4>Employees</h4>

<p>
This table is a master data, has the purpose to keep information of our selves. The first record is to be considered as the company issuing invoices.
</p>

<h4>Countries</h4>

<p>
This table is a master data, has the purpose to allow selection of country while filling customer and employees forms.
</p>

<h4>Weeks, Months</h4>

<p>
These tables are master data, has the purpose to identify week or month for billing.
</p>

<h3>All tables SQL script</h3>

<pre>
CREATE CACHED TABLE "_test"("ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 0) NOT NULL PRIMARY KEY,"Text1" VARCHAR(50),"Text2" VARCHAR(50),"Key1ID" INTEGER,"Key2ID" INTEGER)
CREATE CACHED TABLE "_test_Customers"("CustomerID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 0) NOT NULL PRIMARY KEY,"Company" VARCHAR(50),"FirstName" VARCHAR(50),"LastName" VARCHAR(50),"Address" VARCHAR(100),"City" VARCHAR(50),"CountryID" INTEGER,"Phone" VARCHAR(30),"Email" VARCHAR(50),"Web" VARCHAR(200),"TaxCode" VARCHAR(50),"Notes" LONGVARCHAR,"Picture" LONGVARBINARY,"Disq" TINYINT,"BillWM" CHAR(1))
CREATE CACHED TABLE "_test_Employees"("EmployeeID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 0) NOT NULL PRIMARY KEY,"Company" VARCHAR(50),"FirstName" VARCHAR(50),"LastName" VARCHAR(50),"Address" VARCHAR(100),"City" VARCHAR(50),"CountryID" INTEGER,"Phone" VARCHAR(30),"Email" VARCHAR(50),"Web" VARCHAR(200),"TaxCode" VARCHAR(50),"Notes" LONGVARCHAR,"Picture" LONGVARBINARY)
CREATE CACHED TABLE "_test_Projects"("ProjectID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 0) NOT NULL PRIMARY KEY,"CustomerID" INTEGER,"Name" VARCHAR(50),"Begin" DATE,"End" DATE,"Description" LONGVARCHAR,"Status" TINYINT,"Order" VARCHAR(50),CONSTRAINT SYS_FK_579 FOREIGN KEY("CustomerID") REFERENCES "_test_Customers"("CustomerID"))
CREATE CACHED TABLE "_test_WorkedHrs"("WorkedHrID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 0) NOT NULL PRIMARY KEY,"EmployeeID" INTEGER,"ProjectID" INTEGER,"TaskID" INTEGER,"ActivityID" INTEGER NOT NULL,"Date" DATE,"Hours" DECIMAL(6),"Notes" LONGVARCHAR,CONSTRAINT SYS_FK_564 FOREIGN KEY("EmployeeID") REFERENCES "_test_Employees"("EmployeeID"),CONSTRAINT SYS_FK_576 FOREIGN KEY("ProjectID") REFERENCES "_test_Projects"("ProjectID"))
CREATE CACHED TABLE "_test_Tasks"("TaskID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 0) NOT NULL PRIMARY KEY,"ProjectID" INTEGER NOT NULL,"Description" VARCHAR(200),"EstHrs" DECIMAL(6),"EstCost" DECIMAL(10,2),"WBS" VARCHAR(50) NOT NULL,"Status" TINYINT,CONSTRAINT SYS_FK_595 FOREIGN KEY("ProjectID") REFERENCES "_test_Projects"("ProjectID"))
CREATE CACHED TABLE "_test_Invoices"("InvoiceID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 0) NOT NULL PRIMARY KEY,"CustomerID" INTEGER,"Number" VARCHAR(50),"Date" DATE,"DueDate" DATE,"Note" VARCHAR(100),"Scan" LONGVARBINARY,CONSTRAINT SYS_FK_573 FOREIGN KEY("CustomerID") REFERENCES "_test_Customers"("CustomerID"))
CREATE CACHED TABLE "_test_Status"("Status" TINYINT NOT NULL PRIMARY KEY,"Name" VARCHAR(20),"Description" VARCHAR(200))
CREATE CACHED TABLE "_test_Activities"("ActivityID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 0) NOT NULL PRIMARY KEY,"Description" VARCHAR(200) NOT NULL,"Rate" DECIMAL(10,2) NOT NULL)
CREATE CACHED TABLE "_test_Countries"("CountryID" INTEGER NOT NULL PRIMARY KEY,"Country" VARCHAR(100))
CREATE CACHED TABLE "_test_InvRows"("InvRowID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 0) NOT NULL PRIMARY KEY,"InvoiceID" INTEGER,"WeekID" INTEGER,"MonthID" INTEGER,CONSTRAINT SYS_FK_2113 FOREIGN KEY("InvoiceID") REFERENCES "_test_Invoices"("InvoiceID") ON DELETE CASCADE ON UPDATE CASCADE)
CREATE CACHED TABLE "_test_Weeks"("WeekID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 0) NOT NULL PRIMARY KEY,"Year" SMALLINT,"Week" TINYINT)
CREATE CACHED TABLE "_test_Months"("MonthID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 0) NOT NULL PRIMARY KEY,"Year" SMALLINT,"Month" TINYINT)
ALTER TABLE "_test_Customers" ADD CONSTRAINT SYS_FK_589 FOREIGN KEY("CountryID") REFERENCES "_test_Countries"("CountryID")
ALTER TABLE "_test_Employees" ADD CONSTRAINT SYS_FK_592 FOREIGN KEY("CountryID") REFERENCES "_test_Countries"("CountryID")
ALTER TABLE "_test_Projects" ADD CONSTRAINT SYS_FK_2486 FOREIGN KEY("Status") REFERENCES "_test_Status"("Status")
ALTER TABLE "_test_WorkedHrs" ADD CONSTRAINT SYS_FK_561 FOREIGN KEY("ActivityID") REFERENCES "_test_Activities"("ActivityID")
ALTER TABLE "_test_WorkedHrs" ADD CONSTRAINT SYS_FK_598 FOREIGN KEY("TaskID") REFERENCES "_test_Tasks"("TaskID")
ALTER TABLE "_test_Tasks" ADD CONSTRAINT SYS_FK_2483 FOREIGN KEY("Status") REFERENCES "_test_Status"("Status")
ALTER TABLE "_test_InvRows" ADD CONSTRAINT SYS_FK_1525 FOREIGN KEY("WeekID") REFERENCES "_test_Weeks"("WeekID")
ALTER TABLE "_test_InvRows" ADD CONSTRAINT SYS_FK_2228 FOREIGN KEY("MonthID") REFERENCES "_test_Months"("MonthID")
</pre>

<h2>Relationships</h2>

<p>
Now is the time to look at the relationship between the tables we just analyzed. Generally speaking a master data table will likely have 1:n relationship while an operations table would have n:1.  Learn more on <a href="http://en.wikipedia.org/wiki/Referential_integrity" title="referential integrity" class="http">referential integrity</a> which s the main principle a beginner approaches database systems. <br>
<img src="./Tables/pasted_image003.png">
</p>

<h3>Build your own</h3>

<p>
From menu Tools →  Relationships and for each table set the proper relationship, verify that dragging over to create connection actually create the correct relationship 1:1 or 1:n.
</p>

<h4>Action</h4>

<p>
To grant referential integrity action may be set within the relationship, for instance if an information is spread over few tables and deletion occurs we may have an action that simultaneously eliminate records from other tables. Let's say if I delete a project, I want to be sure that also its tasks are eliminated.<br>
<img src="./Tables/pasted_image002.png">
</p>

<p>
<span class="zim-tag">@base</span> <span class="zim-tag">@xtimecard</span> <span class="zim-tag">@customize</span> 
</p>

                <br>
                <span class="backlinks">
                    <hr class='footnotes'>
                    <b>Backlinks:</b>
                    <br />
                    <a href='../Customize.html'>Home:Software:xTimeCard:Customize</a>
                    
                </span>
                
                <!-- !! The script will center all images. If you prefer the default (images at left delete these three lines -->    
                <script>
                    $( "img" ).wrap( "<div class='imgcenter'></div>" );
                </script>
                
                
            
                <div id='footer'>
                    <p>Created with <a href='http://zim-wiki.org/'>Zim-wiki</a> & the <a href='https://github.com/ecodiv/Ecodiv-responsive'>Ecodiv-responsive template</a><p>
                </div>
            </div>
        </div>
	</div>
</body>
</html>
